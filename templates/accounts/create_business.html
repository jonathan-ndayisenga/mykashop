{% extends 'base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <h1 class="text-2xl font-bold text-center mb-6">Create New Business</h1>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                <label class="block text-gray-700 mb-2">Business Name *</label>
                {{ form.name }}
                {% if form.name.errors %}
                    <div class="text-red-500 text-sm mt-1">{{ form.name.errors.0 }}</div>
                {% endif %}
            </div>
            
            <div>
                <label class="block text-gray-700 mb-2">Default Password *</label>
                {{ form.password }}
                <p class="text-sm text-gray-500 mt-1">Minimum 4 characters</p>
            </div>
        </div>
        
        <div class="mb-6">
            <label class="block text-gray-700 mb-2">Business Address</label>
            {{ form.address }}
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div>
                <label class="block text-gray-700 mb-2">Phone Number</label>
                {{ form.phone_number }}
            </div>
            
            <div>
                <label class="block text-gray-700 mb-2">Email</label>
                {{ form.email }}
            </div>
            
            <div>
                <label class="block text-gray-700 mb-2">Website</label>
                {{ form.website }}
            </div>
        </div>
        
        <div class="bg-blue-50 p-4 rounded-lg mb-6">
            <h3 class="font-bold text-blue-800 mb-2">Accounts that will be created:</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-3 bg-white rounded border border-blue-200">
                    <h4 class="font-medium text-blue-700">Manager Account</h4>
                    <p class="text-sm mt-1">Username: <span id="manager-username" class="font-mono">manager@[businessname]</span></p>
                </div>
                <div class="p-3 bg-white rounded border border-blue-200">
                    <h4 class="font-medium text-blue-700">Cashier Account</h4>
                    <p class="text-sm mt-1">Username: <span id="cashier-username" class="font-mono">cashier@[businessname]</span></p>
                </div>
            </div>
        </div>
        
        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium">
            Create Business
        </button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const nameInput = document.querySelector('input[name="name"]');
    const managerSpan = document.getElementById('manager-username');
    const cashierSpan = document.getElementById('cashier-username');
    
    function updateUsernames() {
        const businessName = nameInput.value.trim().toLowerCase().replace(/\s+/g, '');
        if (businessName) {
            managerSpan.textContent = `manager@${businessName}`;
            cashierSpan.textContent = `cashier@${businessName}`;
        } else {
            managerSpan.textContent = 'manager@[businessname]';
            cashierSpan.textContent = 'cashier@[businessname]';
        }
    }
    
    nameInput.addEventListener('input', updateUsernames);
    updateUsernames(); // Initialize
});
</script>
{% endblock %}